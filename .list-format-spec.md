<!--
  - SPDX-FileCopyrightText: 2025 STRATO GmbH
  - SPDX-License-Identifier: AGPL-3.0-or-later
-->

# List File Format Specification

## Overview

Files with the `.list` extension in this project contain simple, line-based lists of items. This format is used for configuration purposes, particularly for managing app inclusion/exclusion lists.

## Syntax Rules

### Basic Format
- **One item per line**: Each line contains a single item (app name, identifier, etc.)
- **Case sensitive**: Item names are processed as-is
- **No quotes needed**: Items are plain text without quotes or delimiters

### Comments
- **Shell-style comments**: Lines starting with `#` are treated as comments
- **Full-line comments only**: Inline comments (after an item) are NOT supported
- **Whitespace before `#`**: Leading whitespace before `#` is allowed

### Empty Lines
- **Ignored**: Blank lines and lines with only whitespace are ignored
- **Used for readability**: Can be used to group related items visually

### Example

```list
# Core apps that should be disabled
dashboard
weather_status

# Communication apps
mail
calendar

# Optional: These are disabled for performance reasons
# circles
# federation
```

## Files Using This Format

- **`disabled-apps.list`**: Nextcloud apps to disable during build
- **`removed-apps.list`**: Nextcloud apps to completely remove from package

## Processing

Scripts process these files using standard shell commands:
```bash
# Example: Read and filter
grep -v '^#' file.list | grep -v '^[[:space:]]*$'
```

This approach:
1. Removes comment lines (`^#`)
2. Removes empty lines (`^[[:space:]]*$`)
3. Preserves item names exactly as written

## IDE Support

### EditorConfig
The `.editorconfig` file in this directory configures basic formatting for `.list` files:
- Character encoding: UTF-8
- Line endings: LF (Unix-style)
- Indentation: 2 spaces
- Final newline: Required

### Syntax Highlighting

For JetBrains IDEs (IntelliJ IDEA, WebStorm, PyCharm, etc.):
1. Go to **Settings** → **Editor** → **File Types**
2. Find or create **"Shell Script"** file type
3. Add `*.list` to the file name patterns
4. This enables shell-style comment highlighting

For VS Code:
1. Add to `.vscode/settings.json`:
```json
{
  "files.associations": {
    "*.list": "shellscript"
  }
}
```

## Best Practices

1. **Add comments**: Explain why items are included, especially for non-obvious choices
2. **Group logically**: Use empty lines to separate related groups of items
3. **Keep sorted**: Consider alphabetically sorting items within groups for easier maintenance
4. **Document changes**: When adding/removing items, document the reason in comments or commit messages
5. **Avoid duplicates**: Each item should appear only once in the file

## Validation

To validate a `.list` file:
```bash
# Check for duplicates
sort file.list | uniq -d

# Preview processed output (what scripts will see)
grep -v '^#' file.list | grep -v '^[[:space:]]*$'
```
